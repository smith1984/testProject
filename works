
//Запрос на поиск записей за последний час
            Instant instant = ((Instant)session.getNamedQuery("maxTimeStamp").list().get(0)).minus(Duration.ofHours(1));

             Query query = session.getNamedQuery("recordsWithTSMoreX");
             query.setParameter("hour", instant);
             List<Object[]> objectList= query.list();

             Set<String> set = new HashSet<>();
             objectList.forEach(obj ->
                 set.add(obj[0] + ";" + obj[1]));

             set.forEach(System.out::println);

//Запрос на поиск 5 самое часто используемых форм
               Query query =session.getNamedQuery("ratingForms").setMaxResults(5);
               List<Object[]> objectList= query.list();
               query = session.getNamedQuery("countUseForm");
               long count = (long)query.list().get(0);
               objectList.forEach(obj -> System.out.println((long)obj[0]*100*1.0/count*1.0 + "% " + obj[1] + " " + obj[2]));


// Запрос на не законченое заполнение
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();

        Query query = session.getNamedNativeQuery("stopUseForm");
        List<Object[]> objectList= query.list();
        objectList.forEach(obj -> System.out.println(obj[0] + "; "
                + obj[1] + "; " + obj[2] + "; " + obj[3]+ "; " + obj[4]));

        session.getTransaction().commit();
        session.close();
        HibernateUtil.shutdown();